<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1348.17">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #31a354; -webkit-text-stroke: #31a354}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #3182bd; -webkit-text-stroke: #3182bd}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #000000; -webkit-text-stroke: #000000}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #756bb1; -webkit-text-stroke: #756bb1}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #636363; -webkit-text-stroke: #636363}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #32a355; -webkit-text-stroke: #32a355; min-height: 14.0px}
    span.s1 {font-kerning: none}
    span.s2 {font-kerning: none; color: #e6550d; -webkit-text-stroke: 0px #e6550d}
    span.s3 {font-kerning: none; color: #756bb1; -webkit-text-stroke: 0px #756bb1}
    span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s5 {font-kerning: none; color: #3182bd; -webkit-text-stroke: 0px #3182bd}
    span.s6 {font-kerning: none; color: #31a354; -webkit-text-stroke: 0px #31a354}
  </style>
</head>
<body>
<p class="p1"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p2"><span class="s1"><br>
</span></p>
<p class="p3"><span class="s1">&lt;meta </span><span class="s2">charset</span><span class="s1">=</span><span class="s3">"utf-8"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1">&lt;style&gt;</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p3"><span class="s1">text</span><span class="s4"> {</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s2">font</span><span class="s4">:</span><span class="s1"> 10px sans-serif</span><span class="s4">;</span></p>
<p class="p4"><span class="s1">}</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p3"><span class="s1">&lt;/style&gt;</span></p>
<p class="p3"><span class="s1">&lt;body&gt;</span></p>
<p class="p5"><span class="s5">&lt;script </span><span class="s2">src</span><span class="s5">=</span><span class="s1">"https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"</span><span class="s5">&gt;&lt;/script&gt;</span></p>
<p class="p3"><span class="s1">&lt;script&gt;</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s5">var</span><span class="s1"> diameter = </span><span class="s6">960</span><span class="s1">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>format = d3.format(</span><span class="s3">",d"</span><span class="s1">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>color = d3.scale.category20c();</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s5">var</span><span class="s1"> bubble = d3.layout.pack()</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>.sort(null)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>.size([diameter, diameter])</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>.padding(</span><span class="s6">1.5</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s5">var</span><span class="s1"> svg = d3.select(</span><span class="s3">"body"</span><span class="s1">).append(</span><span class="s3">"svg"</span><span class="s1">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>.attr(</span><span class="s3">"width"</span><span class="s1">, diameter)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>.attr(</span><span class="s3">"height"</span><span class="s1">, diameter)</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">    </span>.attr(</span><span class="s1">"class"</span><span class="s4">, </span><span class="s1">"bubble"</span><span class="s4">);</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s1">d3.json(</span><span class="s3">"flare.json"</span><span class="s1">, </span><span class="s5">function</span><span class="s1">(error, root) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s5">if</span><span class="s1"> (error) </span><span class="s5">throw</span><span class="s1"> error;</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s5">var</span><span class="s1"> node = svg.selectAll(</span><span class="s3">".node"</span><span class="s1">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span>.data(bubble.nodes(classes(root))</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span>.filter(</span><span class="s5">function</span><span class="s1">(d) { </span><span class="s5">return</span><span class="s1"> !d.children; }))</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>.enter().append(</span><span class="s3">"g"</span><span class="s1">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span>.attr(</span><span class="s3">"class"</span><span class="s1">, </span><span class="s3">"node"</span><span class="s1">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span>.attr(</span><span class="s3">"transform"</span><span class="s1">, </span><span class="s5">function</span><span class="s1">(d) { </span><span class="s5">return</span><span class="s1"> </span><span class="s3">"translate("</span><span class="s1"> + d.x + </span><span class="s3">","</span><span class="s1"> + d.y + </span><span class="s3">")"</span><span class="s1">; });</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span>node.append(</span><span class="s3">"title"</span><span class="s1">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span>.text(</span><span class="s5">function</span><span class="s1">(d) { </span><span class="s5">return</span><span class="s1"> d.className + </span><span class="s3">": "</span><span class="s1"> + format(d.value); });</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span>node.append(</span><span class="s3">"circle"</span><span class="s1">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span>.attr(</span><span class="s3">"r"</span><span class="s1">, </span><span class="s5">function</span><span class="s1">(d) { </span><span class="s5">return</span><span class="s1"> d.r; })</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span>.style(</span><span class="s3">"fill"</span><span class="s1">, </span><span class="s5">function</span><span class="s1">(d) { </span><span class="s5">return</span><span class="s1"> color(d.packageName); });</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span>node.append(</span><span class="s3">"text"</span><span class="s1">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span>.attr(</span><span class="s3">"dy"</span><span class="s1">, </span><span class="s3">".3em"</span><span class="s1">)</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">      </span>.style(</span><span class="s1">"text-anchor"</span><span class="s4">, </span><span class="s1">"middle"</span><span class="s4">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span>.text(</span><span class="s5">function</span><span class="s1">(d) { </span><span class="s5">return</span><span class="s1"> d.className.substring(</span><span class="s6">0</span><span class="s1">, d.r / </span><span class="s6">3</span><span class="s1">); });</span></p>
<p class="p4"><span class="s1">});</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p6"><span class="s1">// Returns a flattened hierarchy containing all leaf nodes under the root.</span></p>
<p class="p4"><span class="s5">function</span><span class="s1"> classes(root) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s5">var</span><span class="s1"> classes = [];</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s5">function</span><span class="s1"> recurse(name, node) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s5">if</span><span class="s1"> (node.children) node.children.forEach(</span><span class="s5">function</span><span class="s1">(child) { recurse(node.name, child); });</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s5">else</span><span class="s1"> classes.push({packageName: name, className: node.name, value: node.size});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span>}</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span>recurse(null, root);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s5">return</span><span class="s1"> {children: classes};</span></p>
<p class="p4"><span class="s1">}</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p4"><span class="s1">d3.select(self.frameElement).style(</span><span class="s3">"height"</span><span class="s1">, diameter + </span><span class="s3">"px"</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><br>
</span></p>
<p class="p3"><span class="s1">&lt;/script&gt;</span></p>
<p class="p7"><span class="s1"></span><br></p>
</body>
</html>
